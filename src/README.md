# Branch Update:

## 封存后恢复的第一步
3. 重构，要求：所有文件通过clang-tidy检测。创建一个style文档简述所有风格要求。 
4. 所有参数大写并加上m_...
5. 所有函数小写并用下驼峰法
6. 所有函数如非必要则加上const
7. 整理所有函数，但凡重复使用超过2次（包含）则写成函数。
8. 加入大量assert和static_assert用来保证安全
9. 所有路径都是path of xx, absolute path of xxx, relative path of xxx
10. 代码格式风格调整一下, 所有配置文件用.开头，所有类和结构文件用大写开头。
11. 
12. 重写log信息,输出的时候，标记一下输出的系统是fileMgr还是PluginMGr。。。。
13. 所有写死的字符串如果在多位置配对使用则写成宏
14. 修复bug：
15. Log的存量达到上线后自动保存功能没做
16. connectwidget在错误情况下的显示内容和颜色都是不对的，错误要把所有的栏位改成错误
17. ConnectWidget连接后返回还是会出现下载的要求。
18. 所有mod文件夹缺失后改一下报错信息。目前是乱码

## 第二步（原第一部分的第三部分， part 1 section 3/4）
1. 服务器管理面板进入后右侧不显示
2. 面板删除服务器后右侧不更新
1. client加入处理服务器主动断开的情况，
1. client加入下载完文件客户端主动断开的情况
1. GameSystemServer:ValidateSave要对存档要求的mod进行本地检查。
1. GameSystemServer:Validate要兼容版本的模糊匹配
1. 主界面加一个音乐资源并自动播放，加入音量设置与实时更新。
1. 完成设置面板并加入音量和分页
1. 使用的地图放在plugin外面，获取路径通过Core传递
1. 找个大文件测试大文件传输并处理，传输中断的情况。
1. client可能是任何版本，server应该发送正确的版本。要考虑是否需要发送对应操作系统的plugin。考虑QT的加载模式是否能在window上加载.so文件。考虑客户端和服务器启动后是否需要收集运行平台信息。考虑服务器在建立链接的时候是否需要标记客户端的链接来自Windows还是linux。
1. 完成游戏存储和运行时的结构设计，在GameSystem里的FullPluginReload里对所有资源进行加载并检查。
2. GameWidget启动时候应该显示一个Logo动画，在此期间WebSocketClient应该完成跟服务器的数据同步并加载完成以便GameWidget显示完动画后可以直接加载。开始处理客户端连接到服务器后的同步功能
1. 所有Player数据都用QByteArray，所有的转换都在core plugin里面处理。
3. 服务器要完成GameSystemServer.GameInitiate()部分完成具体的默认存档生成。
1. 多客户端连接的测试和数据操作同步。多实例测试同步转发与启停，游戏将处于运行直到最后一个玩家断开连接，可以设置一个变量在ServerConfigData里，写明即使没有玩家，服务器依然运行。再加一个配置写游戏速度（现实时间vs游戏内时间）。并且服务器定时移除不活跃玩家（例如20分钟没动一下的玩家，同样设置里可选）
1. 客户端做多个服务器的留存，给每个服务器生成一个影子文件夹。创建时先从本地复制已有的mod，然后再从服务器下载。
1. 完成服务器数据发送的断点续传功能。如果发送中断，要妥善处理报错和重连。最好做到断点续传。
1. 服务器配置中加入1. 世界大小（xyz），2. 是否强制使用给的世界大小，值1：是，值2：使用测试结果。并在世界创建的时候执行一次运算效率测试，并推荐具体晶格配置。
5. 服务器地图更新测试，通过网络发给客户端，然后更新客户端显示。向所有client发送所有被修改格子的坐标和新数据，client修改后发回server的信息同理。
1. 页面参考Rstudio， 最上面是terminal，快捷键显示和脱出，右面是类似于缺氧的物品信息表。右下角是切片图，主要是竖着的切片，主要处理跨层连接的状态。
7. 服务器在添加新玩家的时候直接发送最近的切片并发送所有的自那个切片后的所有更新，找一个合适的同步频率
1. 测试聊天对话框和游戏内状态显示，redirect Log到游戏内对话框。log所有玩家交流信息到另一个log文件。
3. 鼠标位置实时显示周围网格，渐出显示，右上角显示格子详细信息，所有metaData和Resources的data
1. 完成Core的功能：1.step function. 用switch枚举状态（Heat/Fluid diffusion有framework来做） 2. GUIWidget(这个widget直接overlay到GameWidget上并且拦截所有其上的鼠标和键盘操作)和其所有下属操作。并与GameWidget绑定按钮和鼠标操作。例如按下tab键显示A-GUI。
1. 客户端从服务端下载游戏数据
1. 开始做游戏的迭代与演变。
1. 设计类似余料建造和究极手的功能
1. 画风考虑写实风格或者水墨？极简风格？
1. 每种实体出demo
2. 核心是开放世界和巨构建筑和细节基地管理和编程和兴趣引导学习

## 第三步（优化）
1. 服务器发送文件的时候考虑使用多线程，考虑线程安全的问题。
2. 服务器发送文件的时候考虑使用断点续传
3. 存档生成的时候可以选择加入其他存档
4. 完成所有类的测试（如果可能的话）
5. 补全所有文档
6. 加入翻译文件
1. 加入自己的中文/英文字体
1. .control里的-mod=test/release功能 is disabled，需要实现。
1. .control deploy暂时改成了显示debug=on
1. 加个版本和项目名字控制并链接所有的CICD到正确的版本，将项目名字改为一个变量，并修改对应的CMakeLists和脚本
1. 制作一个能够用于CICD的DockerImage或者Image的MakeFile。升级QT到6.5，所有docker也要升级
1. 完成.gitlab-ci.yml
3. 启用GitHub对代码进行备份，且自动推送关于modInterface的更改到一个公共的repo且在其中启用游戏wiki。
2. 启动修改pipline文件，通过git自动向GitHub备份
4. pipline应该能在多平台上自动测试（功能性，风格，覆盖率和内存泄露），编译，部署相关程序（与steam有关的除外）并正确配置，例如Starup的脚本里的QT路径不能写死，得用宿主机的QT路径。删除测试用的mLastKnown地址。
1. 客户端修改一下主菜单的背景图，游戏名字字体，按钮风格，移除右下角的按钮，建立版号系统，加入背景音乐。

## 第四部（工具开发）
1. 客户端加入存档管理面板(Pending)
1. 客户端加入地图编辑器面板(Pending)
1. 客户端加入服务器管理面板，使得客户端可以配置服务器并直接启动服务器。